### 多态

`virtual`

不同对象产生不同行为



* 根据实际对象去判断调用的重名函数



多态的意义：

* 在程序中表现出动态特性
* 在子类中重写父类中同名函数 必须声明成虚函数 否则没有意义

* 多态是面向对象设计的基础



静态联编：程序在编译期间就知道 调用哪个函数重载

动态联编：程序在运行期间才知道 调用哪个函数重写



### c++中实现多态原理



`virtual`时 编译器改变对象排布

* 在类声明虚函数时编译器自动生成1个虚函数
* 虚函数表是一个存储成员函数地址数据结构
* 虚函数表是由编译器自动生成和维护的
* 被virtual修饰的虚函数会被放入虚函数表中
* 存在虚函数时，每个对象会有一个指针指向虚函数表，并且这个指针会在对象头部





### 总结

* 函数重写只能发生在父与子类之间
* 多态是指根据根据 



#### 虚函数

虚函数 -> 纯虚函数  -> 抽象类 -> 接口

被virtual修饰的叫虚函数

**通过对象调用虚函数：对象地址的首部存着虚函数表的地址，虚函数表中存着虚函数的地址**



### 抽象类

* 只能定义类型，不能产生对象
* 只能被继承并重写相关函数
* 某些相关函数（虚函数）没有被实现

**c++中没有真正的抽象类概念，只能通过纯虚函数间接实现**



##### 纯虚函数

只有声明函数原型的成员函数，c++中只要有纯虚函数的类就是抽象类

```c++
virtual bool send(char *buf, int len) = 0;
```

写法

**`virtual 返回值类型 函数名() = 0;`**





#### 接口

是一种特殊的抽象类

一组函数原型 c++中没有直接接口概念 （c# java中有）

* 这个抽象类中没有成员变量
* 所有成员函数都是私有的
* 所有成员函数都是纯虚函数

所以说接口类是一组特殊的抽象类



### 单继承 + 多接口

